{% load static tailwind_tags %}<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1.0" />
		<title>Document</title>
		<link
			href="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.3.0/flowbite.min.css"
			rel="stylesheet" />
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
			integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
			crossorigin="anonymous"
			referrerpolicy="no-referrer" />
		{% tailwind_css %}
	</head>
	<body class="overflow-x-hidden">
		<header class="relative z-50 w-full h-24">
			<div class="container flex items-center justify-center h-full max-w-6xl px-8 mx-auto sm:justify-between xl:px-0">
				<a
					href="/"
					class="relative flex items-center h-full font-black leading-none">
					<img
						src="{% static 'img/logo1.jpg' %}"
						width="50"
						alt="" />
				</a>

				<div
					class="absolute left-0 flex-col items-center justify-center hidden w-full pb-8 mt-48 border-b border-gray-200 md:relative md:w-auto md:bg-transparent md:border-none md:mt-0 md:flex-row md:p-0 md:items-end md:flex md:justify-between">
					<a
						href="{% url 'register' %}"
						class="relative z-40 inline-block w-auto h-full px-5 py-3 text-sm font-bold leading-none text-white transition-all duration-300 bg-red-700 rounded shadow-md fold-bold lg:bg-red-800 lg:text-white sm:w-full lg:shadow-none hover:shadow-xl">
						<i class="fas fa-walking"></i>
						Logout
					</a>
					<svg
						class="absolute top-0 left-0 hidden w-screen max-w-3xl -mt-64 -ml-12 lg:block"
						viewBox="0 0 818 815"
						xmlns="http://www.w3.org/2000/svg"
						xmlns:xlink="http://www.w3.org/1999/xlink">
						<defs>
							<linearGradient
								x1="0%"
								y1="0%"
								x2="100%"
								y2="100%"
								id="c">
								<stop
									stop-color="#E614F2"
									offset="0%" />
								<stop
									stop-color="#FC3832"
									offset="100%" />
							</linearGradient>
							<linearGradient
								x1="0%"
								y1="0%"
								x2="100%"
								y2="100%"
								id="f">
								<stop
									stop-color="#657DE9"
									offset="0%" />
								<stop
									stop-color="#1C0FD7"
									offset="100%" />
							</linearGradient>
							<filter
								x="-4.7%"
								y="-3.3%"
								width="109.3%"
								height="109.3%"
								filterUnits="objectBoundingBox"
								id="a">
								<feOffset
									dy="8"
									in="SourceAlpha"
									result="shadowOffsetOuter1" />
								<feGaussianBlur
									stdDeviation="8"
									in="shadowOffsetOuter1"
									result="shadowBlurOuter1" />
								<feColorMatrix
									values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0"
									in="shadowBlurOuter1" />
							</filter>
							<filter
								x="-4.7%"
								y="-3.3%"
								width="109.3%"
								height="109.3%"
								filterUnits="objectBoundingBox"
								id="d">
								<feOffset
									dy="8"
									in="SourceAlpha"
									result="shadowOffsetOuter1" />
								<feGaussianBlur
									stdDeviation="8"
									in="shadowOffsetOuter1"
									result="shadowBlurOuter1" />
								<feColorMatrix
									values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"
									in="shadowBlurOuter1" />
							</filter>
							<path
								d="M160.52 108.243h497.445c17.83 0 24.296 1.856 30.814 5.342 6.519 3.486 11.635 8.602 15.12 15.12 3.487 6.52 5.344 12.985 5.344 30.815v497.445c0 17.83-1.857 24.296-5.343 30.814-3.486 6.519-8.602 11.635-15.12 15.12-6.52 3.487-12.985 5.344-30.815 5.344H160.52c-17.83 0-24.296-1.857-30.814-5.343-6.519-3.486-11.635-8.602-15.12-15.12-3.487-6.52-5.343-12.985-5.343-30.815V159.52c0-17.83 1.856-24.296 5.342-30.814 3.486-6.519 8.602-11.635 15.12-15.12 6.52-3.487 12.985-5.343 30.815-5.343z"
								id="b" />
							<path
								d="M159.107 107.829H656.55c17.83 0 24.296 1.856 30.815 5.342 6.518 3.487 11.634 8.602 15.12 15.12 3.486 6.52 5.343 12.985 5.343 30.816V656.55c0 17.83-1.857 24.296-5.343 30.815-3.486 6.518-8.602 11.634-15.12 15.12-6.519 3.486-12.985 5.343-30.815 5.343H159.107c-17.83 0-24.297-1.857-30.815-5.343-6.519-3.486-11.634-8.602-15.12-15.12-3.487-6.519-5.343-12.985-5.343-30.815V159.107c0-17.83 1.856-24.297 5.342-30.815 3.487-6.519 8.602-11.634 15.12-15.12 6.52-3.487 12.985-5.343 30.816-5.343z"
								id="e" />
						</defs>
						<g
							fill="none"
							fill-rule="evenodd"
							opacity=".9">
							<g transform="rotate(65 416.452 409.167)">
								<use
									fill="#000"
									filter="url(#a)"
									xlink:href="#b" />
								<use
									fill="url(#c)"
									xlink:href="#b" />
							</g>
							<g transform="rotate(29 421.929 414.496)">
								<use
									fill="#000"
									filter="url(#d)"
									xlink:href="#e" />
								<use
									fill="url(#f)"
									xlink:href="#e" />
							</g>
						</g>
					</svg>
				</div>

				<div
					id="nav-mobile-btn"
					class="absolute top-0 right-0 z-50 block w-6 mt-8 mr-10 cursor-pointer select-none md:hidden sm:mt-10">
					<span class="block w-full h-1 mt-2 duration-200 transform bg-gray-800 rounded-full sm:mt-1"></span>
					<span class="block w-full h-1 mt-1 duration-200 transform bg-gray-800 rounded-full"></span>
				</div>
			</div>
		</header>

		{% if user.is_authenticated %}
		<div class="m-10 w-full max-w-[700px] mx-auto mt-24">
			<div class="rounded-lg border bg-white px-4 pt-8 pb-10 shadow-lg">
				<div class="relative mx-auto w-36 rounded-full">
					<span
						class="absolute right-0 m-3 h-3 w-3 rounded-full bg-green-500 ring-2 ring-green-300 ring-offset-2"></span>
					<img
						class="mx-auto h-auto w-full rounded-full"
						src="{{user.profile.profile_pic.url}}"
						alt="" />
				</div>
				<h1 class="my-1 text-center text-xl font-bold leading-8 text-gray-900">{{user.first_name}}</h1>
				<h3 class="font-lg text-semibold text-center leading-6 text-gray-600">
					{{user.profile.barangay}}, {{user.profile.purok}}, {{user.profile.address}}
				</h3>
				<p class="text-center text-sm leading-6 text-gray-500 hover:text-gray-600">{{user.profile.postal_code}}</p>
				<ul
					class="mt-3 divide-y rounded bg-gray-100 py-2 px-3 text-gray-600 shadow-sm hover:text-gray-700 hover:shadow">
					<li class="flex items-center py-3 text-sm">
						<span>
							<i
								class="fa fa-calendar"
								aria-hidden="true"></i>
							Date of Birth
						</span>
						<span class="ml-auto">
							<span
								class="rounded-full bg-green-200 py-1 px-2 text-xs font-medium text-green-700"
								data-dob="{{ user.profile.dob }}">
								{{ user.profile.dob }}
							</span>
						</span>
					</li>
					<li class="flex items-center py-3 text-sm">
						<span>
							<i
								class="fa fa-sort-numeric-desc"
								aria-hidden="true"></i>
							Age
						</span>
						<span class="ml-auto age-cell"><!--age here --></span>
					</li>
					<li class="flex items-center py-3 text-sm">
						<span>
							<i
								class="fa fa-sort-numeric-desc"
								aria-hidden="true"></i>
							Mobile Number
						</span>
						<span class="ml-auto">{{user.username}}</span>
					</li>
				</ul>
			</div>
		</div>
		{% endif %}
		<script>
			function calculateAge(dob) {
				const dobDate = new Date(dob);
				const today = new Date();
				let age = today.getFullYear() - dobDate.getFullYear();
				const monthDiff = today.getMonth() - dobDate.getMonth();
				if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < dobDate.getDate())) {
					age--;
				}
				return age;
			}

			document.addEventListener("DOMContentLoaded", () => {
				const dobElement = document.querySelector("span[data-dob]");
				if (dobElement) {
					const dob = dobElement.getAttribute("data-dob");
					const age = calculateAge(dob);
					const ageCell = document.querySelector(".age-cell");
					if (ageCell) {
						ageCell.textContent = age;
					}
				}
			});
		</script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.3.0/flowbite.min.js"></script>
	</body>
</html>
